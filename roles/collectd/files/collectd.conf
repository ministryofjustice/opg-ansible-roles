{%- from "opg-collectd/map.jinja" import collectd_settings with context -%}
#
# DO NOT EDIT
#
# This file is managed by salt via {{ source }}
# Modify the config that generates this file instead
#

{% if "opg_aws_instance_id" in grains %}
Hostname "{{ grains['opg_role'] }}_{{ grains['opg_aws_instance_id'] }}"
{% else %}
Hostname "{{ grains['opg_role'] }}_{{ grains['fqdn'].split('.')|reverse| join('.') }}"
{% endif %}
FQDNLookup {{ collectd_settings.FQDNLookup }}

{% for plugin in collectd_settings.plugins.default %}
LoadPlugin {{ plugin }}
{%- endfor -%}

{% if collectd_settings.plugins.enable %}
Include "{{ collectd_settings.plugindirconfig }}/*.conf"
{% endif -%}
